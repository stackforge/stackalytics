{% extends "layout.html" %}

{% block title %}
    {{ company }}
{% endblock %}

{% block scripts %}
<script type="text/javascript">
    chartAndTableRenderer("/data/engineers", "left_list", "left_chart", "/engineers/", {company: "{{ company|encode }}" });
    chartAndTableRenderer("/data/modules", "right_list", "right_chart", "/modules/", {company: "{{ company|encode }}" });
    timelineRenderer({company: "{{ company|encode }}" })
</script>
{% endblock %}


{% block left_frame %}

    <h2>Contribution by engineers</h2>

    <div id="left_chart" style="width: 100%; height: 350px;"></div>

    <table id="left_list" class="display">
        <thead>
            <tr>
                <th>#</th>
                <th>Engineer</th>
                <th>{{ metric_label }}</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div class="spacer"></div>

{% endblock %}

{% block right_frame %}

    <h2>Contribution by modules</h2>

    <div id="right_chart" style="width: 100%; height: 350px;"></div>

    <table id="right_list" class="display">
        <thead>
            <tr>
                <th>#</th>
                <th>Module</th>
                <th>{{ metric_label }}</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div class="spacer"></div>

    <h3>Commit overview</h3>
    {%  if blueprints %}
        <div>Blueprints:
            <ol>
                {% for rec in blueprints %}
                    <li>
                        <a href="https://blueprints.launchpad.net/{{ rec['module'] }}/+spec/{{ rec['id'] }}">{{ rec['id'] }}</a>
                        <small>{{ rec['module'] }}</small>
                    </li>
                {% endfor %}
            </ol>
        </div>
    {% endif %}

    {% if bugs %}
        <div>Bugs:
            <ol>
                {% for rec in bugs %}
                    <li>
                        <a href="https://bugs.launchpad.net/bugs/{{ rec['id'] }}">{{ rec['id'] }}</a>
                    </li>
                {% endfor %}
            </ol>
        </div>
    {% endif %}

    <div>Total commits: <b>{{ commits|length }}</b></div>
    <div>Total LOC: <b>{{ loc }}</b></div>

{% endblock %}
